# Installation Guide

## Introduction

This document aims to be a quick step-by-step mini tutorial on how to install Ruby interpreters on distinct operation systems.

## Step by Step

After installation and configuration it's recommended to issue the following command in order to update RubyGem:

```ruby
gem update --system
```

### Windows 7 / 8

- Download [RubyInstaller](http://rubyinstaller.org/downloads/), which is a self-contained Windows-based installer that includes the Ruby language, an execution environment, important documentation, and more;
- Fix Environment Variables: add the path to [RUBY_INSTALL_DIR] to a DEVKITS environment variable;
- Test by issuing the following command on a Command Prompt window:<br/>```ruby --version```;
- Also download a [Development Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit), which includes GCC, because it's required when installing gems with native code, and issue the following commands on a Command Prompt in [DEVKIT_INSTALL_DIR] folder:

```bash
ruby dk.rb init
ruby dk.rb review
ruby dk.rb install
```

**Attention**: if also using StrawberryPerl then the path to [RUBY_INSTALL_DIR] must come after the path to [PERL_INSTALL_DIR].

**Note**: if both MRI and JRuby coexist then it's a best practice to put the path to [JRUBY_INSTALL_DIR] after the path to [RUBY_INSTALL_DIR]. Or better yet, use a Ruby Version Manager, such as [pik](https://github.com/vertiginous/pik) or [uru](https://bitbucket.org/jonforums/uru).

#### Why DevKit?

> The DevKit is a toolkit that makes it easy to build and use native C/C++ extensions such as RDiscount and RedCloth for Ruby on Windows.

#### Access MSys / MinGW

> To access all of the MSYS/MinGW tools from a Command Prompt shell, run the **devkitvars.bat** helper script ( lives in [DEVKIT_INSTALL_DIR] ) to update the shell’s PATH environment variable. Similarly, if using PowerShell, run the **devkitvars.ps1** helper script.

#### Notes

> The path to [RUBY_INSTALL_DIR] must not contain any whitespaces ( like in "C:\Program Files\Ruby" ). This is very important because whitespaces in the path to ruby installation will cause certain error messages as soon as one tries to install gems which require the DevKit.

> If using the x64 version of ruby one might get an error saying _Invalid configuration. Please fix 'config.yml' and rerun 'ruby dk.rb install'_. See [Can't get Ruby DevKit configuration file autogenerated properly - solution](http://stackoverflow.com/a/17148987).

#### pik

[Pik](https://github.com/vertiginous/pik) is a Ruby version manager for Windows. But due to technical difficulties it's no longer maintained and it's recommended to move to **uru**. To install simply download the latest MSI file, follow the installation wizard and then run the following commands:

```bash
pik --version
pik add C:\DevKits\Ruby-1.8.7\bin
pik add C:\DevKits\Ruby-1.9.3\bin
pik add C:\DevKits\Ruby-2.2.2\bin
pik add C:\DevKits\Java\jruby-1.7.20\bin # Not really necessary, since jruby != ruby.
pik use 222
pik list
```

**Note**: it may be wise to fix the PATH Environment Variable, by removing any direct Ruby installations from it and by adding the folder where pik was installed.

#### uru

[Uru](https://bitbucket.org/jonforums/uru) is a Ruby version manager, for Windows, Linux and MacOS, that is replacing Pik in Windows. To install simply download the _tarball_, uncompress it and then run the following commands:

```bash
uru_rt admin install
uru version

uru admin add C:\DevKits\Ruby-1.8.7\bin
uru admin add C:\DevKits\Ruby-1.9.3\bin
uru admin add C:\DevKits\Ruby-2.2.2\bin
uru admin add C:\DevKits\Java\jruby-1.7.20\bin # Not really necessary, since jruby != ruby.
uru ls --verbose
uru 222p95
```

**Note**: it's also possible to install uru using [Chocolatey](https://bitbucket.org/jonforums/uru/wiki/Chocolatey) and installing it both for Native Windows and [Cygwin / MinGW](https://bitbucket.org/jonforums/uru/wiki/BashOnWindows).

### Linux Ubuntu 14.04 LTS - Trusty Tahr

Ubuntu does not ship with a Ruby interpreter by default and latest version in official repository is 1.9.3. In order to install latest versions it's necessary to execute the set of commands, of one of the following options, in a terminal session.

After installing it's wise to also execute the following commands in a terminal session, before installing any gems:

```bash
echo "gem: --no-ri --no-rdoc" > ~/.gemrc
gem install bundler
```

#### From Sources

```bash
cd /tmp
wget http://ftp.ruby-lang.org/pub/ruby/2.2/ruby-2.2.2.tar.gz
tar -xzvf ruby-2.2.2.tar.gz
cd ruby-2.2.2/

./configure --prefix=/usr/local
make
sudo make install
```

#### Ubuntu BrightBox PPA

```bash
sudo apt-get install software-properties-common
sudo apt-add-repository ppa:brightbox/ruby-ng
sudo apt-get update

sudo apt-get install ruby1.8 ruby1.9.3 ruby2.0 ruby2.1 ruby2.2
sudo apt-get install ruby-switch --set ruby2.2
```

#### rvm

[RVM](https://rvm.io/) is a Ruby version manager for Linux.

> RVM is a command-line tool which allows you to easily install, manage, and work with multiple ruby environments from interpreters to sets of gems.

```bash
cd /tmp
sudo apt-get install libgdbm-dev libncurses5-dev automake libtool bison libffi-dev
curl -L https://get.rvm.io | bash -s stable
source ~/.rvm/scripts/rvm
rvm install 2.2.2
rvm use 2.2.2 --default
```

#### rbenv

[rbenv](https://github.com/sstephenson/rbenv): Groom your app’s Ruby environment.

> Use **rbenv** to pick a Ruby version for your application and guarantee that your development environment matches production. Put rbenv to work with Bundler for painless Ruby upgrades and bulletproof deployments.

It's useful to also install [ruby-build](https://github.com/sstephenson/ruby-build), to compile and install Ruby from sources.

> **ruby-build** is an rbenv plugin that provides an ```rbenv install``` command to compile and install different versions of Ruby on UNIX-like systems. You can also use ruby-build without rbenv in environments where you need precise control over Ruby version installation.

```bash
cd /tmp
git clone git://github.com/sstephenson/rbenv.git .rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
exec $SHELL

git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
echo 'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"' >> ~/.bashrc
exec $SHELL

git clone https://github.com/sstephenson/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash

rbenv install 2.2.2
rbenv global 2.2.2
```

**Note**: rbenv is incompatible with RVM. Please make sure to fully uninstall RVM and remove any references to it from your shell initialization files before installing rbenv.

### MacOS

## Variants

There are other interpreters, that are not covered on this mini installation guide:

- [JRuby](http://jruby.org/): JRuby is an implementation of the Ruby programming language atop the Java Virtual Machine, written largely in Java;
- [IronRuby](http://ironruby.net/): IronRuby is an open-source implementation of the Ruby programming language which is tightly integrated with the .NET Framework;
- [Rubinius](http://rubini.us/): An implementation of Ruby designed for concurrency using native threads to run Ruby code on all the CPU cores;
- [mruby](http://www.mruby.org/): mruby is the lightweight implementation of the Ruby language complying with part of the ISO standard. mruby can be linked and embedded within your application.

## Useful gems

This is a list of gems that are often installed on most Ruby development environments:
